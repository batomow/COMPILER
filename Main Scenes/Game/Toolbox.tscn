[gd_scene load_steps=6 format=2]

[ext_resource path="res://Art/toolbox.png" type="Texture" id=1]
[ext_resource path="res://Art/tape.png" type="Texture" id=2]
[ext_resource path="res://Art/cubeta.png" type="Texture" id=3]
[ext_resource path="res://Art/martillo.png" type="Texture" id=4]

[sub_resource type="GDScript" id=1]
script/source = "extends Control

onready var Tape = $HBoxContainer/Tape
onready var Cubeta = $HBoxContainer/Cubeta
onready var Martillo = $HBoxContainer/Martillo
onready var HBox = $HBoxContainer
onready var Holder = $MouseHolder

var _tape_flag := false 
var _cubeta_flag := false
var _martillo_flag := false
var _has_object := false

func _process(delta):
	if _tape_flag: 
		Tape.rect_position = (get_global_mouse_position() - Vector2(85, 67) * 0.4) * 2.5
	elif _cubeta_flag: 
		Cubeta.rect_position = (get_global_mouse_position() - Vector2(85, 67) * 0.4) * 2.5
	elif _martillo_flag: 
		Martillo.rect_position = (get_global_mouse_position() - Vector2(85, 67) * 0.4) * 2.5

	if _has_object and Input.is_action_just_pressed(\"right_mouse_button\"): 
		if _tape_flag: 
			Holder.remove_child(Tape) 
			HBox.add_child(Tape)
			_tape_flag = false
			_has_object = false
		elif _cubeta_flag: 
			Holder.remove_child(Cubeta) 
			HBox.add_child(Cubeta)
			_cubeta_flag = false 
			_has_object = false
		elif _martillo_flag: 
			Holder.remove_child(Martillo) 
			HBox.add_child(Martillo) 
			_martillo_flag = false
			_has_object = false

func _on_Tape_gui_input(event):
	if event is InputEventMouseButton and !_has_object:
		HBox.remove_child(Tape)
		Holder.add_child(Tape) 
		_tape_flag = true
		_has_object = true

func _on_Cubeta_gui_input(event):
	if event is InputEventMouseButton and !_has_object:
		HBox.remove_child(Cubeta)
		Holder.add_child(Cubeta) 
		_cubeta_flag = true
		_has_object = true


func _on_Martillo_gui_input(event):
	if event is InputEventMouseButton and !_has_object:
		HBox.remove_child(Martillo)
		Holder.add_child(Martillo) 
		_martillo_flag = true
		_has_object = true

"

[node name="Toolbox" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
rect_scale = Vector2( 0.4, 0.4 )
script = SubResource( 1 )

[node name="Caja" type="TextureRect" parent="."]
margin_left = 47.6132
margin_top = 1329.77
margin_right = 711.613
margin_bottom = 1752.77
texture = ExtResource( 1 )

[node name="HBoxContainer" type="HBoxContainer" parent="."]
margin_left = 141.156
margin_top = 1435.71
margin_right = 628.156
margin_bottom = 1607.71
custom_constants/separation = 20

[node name="Tape" type="TextureRect" parent="HBoxContainer"]
margin_right = 169.0
margin_bottom = 172.0
texture = ExtResource( 2 )
stretch_mode = 3

[node name="Cubeta" type="TextureRect" parent="HBoxContainer"]
margin_left = 189.0
margin_right = 339.0
margin_bottom = 172.0
texture = ExtResource( 3 )
stretch_mode = 3

[node name="Martillo" type="TextureRect" parent="HBoxContainer"]
margin_left = 359.0
margin_right = 487.0
margin_bottom = 172.0
texture = ExtResource( 4 )
stretch_mode = 3

[node name="MouseHolder" type="Control" parent="."]
margin_right = 40.0
margin_bottom = 40.0
[connection signal="gui_input" from="HBoxContainer/Tape" to="." method="_on_Tape_gui_input"]
[connection signal="gui_input" from="HBoxContainer/Cubeta" to="." method="_on_Cubeta_gui_input"]
[connection signal="gui_input" from="HBoxContainer/Martillo" to="." method="_on_Martillo_gui_input"]
